{% load staticfiles %}
<!DOCTYPE html>
<html>
    <head>
        <title>shop</title>
        <meta charset="utf-8">
        <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
        <script src="{% static 'script/datepicker/js/jquery.ui.core.js' %}"></script>
        <script src="{% static 'script/datepicker/js/jquery.ui.datepicker.js' %}"></script>
        <script src="{% static 'script/datepicker/js/jquery.ui.widget.js' %}"></script>
        <script src="{% static 'script/datepicker/js/jquery-migrate-1.0.0.js' %}"></script>
        <!-- jqGrid插件包-必要 -->
        <script src="{% static 'script/jqgrid/js/jquery.jqGrid.min.js' %}"></script>
		<!-- jqGrid插件的多语言包-非必要 -->
        <script src="{% static 'script/jqgrid/js/i18n/grid.locale-cn.js' %}"></script>
		<!-- jqGrid组件基础样式包-必要 -->
        <link rel="stylesheet" type="text/css" href="{% static 'script/jqgrid/css/ui.jqgrid.css' %}">
		<!-- jqGrid主题包-非必要 --> 
        <link rel="stylesheet" type="text/css" href="{% static 'script/jqgrid/css/ui-lightness/jquery-ui-1.8.16.custom.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'script/datepicker/css/jquery.ui.datepicker.css' %}">
        <script>
            function Bind(data){
                $("#tabShowData").jqGrid('clearGridData')
                $("#tabShowData").jqGrid('setGridParam',{
                    datatype: 'local',
                    data: data,
                    loadComplete: function(){
                        alert('datas ok')
                    }
                }).trigger('reloadGrid')
            }

            function QueryItems(){
                $.ajax({
                    type:'get',
                    url:'QueryGoodsList',
                    success: function(data){
                        Bind(data)
                    }
                })  
            }

            $(document).ready(function(){
                $("#tabShowData").jqGrid({
                    datatype: "local",
                    colModel:[
                        {label:'ID', name:'id', width:'5%'},
                        {label:'Name', name:'name', width:'25%'},
                        {label:'Price', name:'price', width:'15%'},
                    ],
                    height: $(window).height()*0.8,
                    viewrecords: true,//是否在浏览导航栏显示记录总数
                    altRows: true,//设置为交替行表格,默认为false
                    multiselect: true,//是否多选
                    multiboxonly: true,//是否只能点击复选框多选
                    caption: "商品表",//表名
                    autowidth: true,//自动宽
                    multiSort: true,
                    caption: "HIDE",
                    
                    pager: '#divPaper',//分页、按钮所在的浏览导航栏
                    rowNum: 100,//每页显示记录数
                    rowList: [50, 100, 200, 1000],//用于改变显示行数的下拉列表框的元素数组。
                })
                $("#tabShowData").navGrid("#divPaper", {
                    add: true,
                    del: true,
                    edit: true,
                    search: false,
                    refresh: true
                },
                {}, // edit options
                {}, // add options
                {}, // delete options
                // {multipleSearch: true, multipleGroup:true, showQuery: true, 'tmplNames': ["测试"], 'tmplFilters': [searchTemplate1]}
                )
                $("#tabShowData").jqGrid('filterToolbar', {searchOperators : true})

                $(window).resize(function(){  
                    $("#tabShowData").setGridWidth($(window).width())
                    $("#tabShowData").setGridHeight($(window).height()*0.8)
                });  
                QueryItems()
            })
        </script>
        <style>
            .ui-jqgrid tr.jqgrow td {
                text-overflow: ellipsis;
                white-space: nowrap;
            }
            .ui-jqgrid .ui-jqgrid-htable .ui-th-div {
                height: 30px;
            }
            .ui-jqgrid .ui-pg-selbox {
                height: 30px;
            }
        </style>
    </head>
    <body>
        <table id="tabShowData"></table>
        <div id="divPaper"></div>
    </body>
</html>